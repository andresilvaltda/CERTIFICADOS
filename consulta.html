
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Consulta de Certificado</title>
  <style>
    body { font-family: Arial, sans-serif; background: #e0f7f9; padding: 20px; margin: 0; }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      text-align: center;
    }
    .resultado { margin-top: 20px; padding: 1rem; border-radius: 5px; }
    .valido { background: #d4edda; color: #155724; }
    .invalido { background: #f8d7da; color: #721c24; }
    input, button { padding: 10px; margin: 10px 0; width: 100%; font-size: 1rem; }
    .logo { max-width: 150px; margin-bottom: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <img src="logo.jpg" alt="Logo AS" class="logo" />
    <h2>üîç Consulta de Certificado</h2>
    <div id="formBusca">
      <input type="text" id="codigo" placeholder="Digite o c√≥digo do certificado">
      <button onclick="buscar()">Verificar</button>
    </div>
    <div id="resultado" class="resultado"></div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCIXyUVNx7xv6zjD6HrHNLSxVra3GOC9l0",
      authDomain: "certificados-a42ac.firebaseapp.com",
      projectId: "certificados-a42ac",
      storageBucket: "certificados-a42ac.firebasestorage.app",
      messagingSenderId: "703312022288",
      appId: "1:703312022288:web:49081afee8e1f00f433395",
      measurementId: "G-Z2SWB955EQ"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const colRef = collection(db, "certificados");

    async function buscar() {
      const codigo = new URLSearchParams(window.location.search).get("codigo") || document.getElementById("codigo").value.trim();
      const resultado = document.getElementById("resultado");
      resultado.innerHTML = "";
      if (!codigo) return;

      let encontrado = false;
      const snapshot = await getDocs(colRef);
      snapshot.forEach(doc => {
        const cert = doc.data();
        if (cert.codigo === codigo) {
          resultado.innerHTML = `
            <div class='valido'>
              ‚úÖ Certificado V√°lido<br>
              <b>Nome:</b> ${cert.nome}<br>
              <b>Curso:</b> ${cert.curso}<br>
              <b>Data:</b> ${cert.data}<br>
              <b>Empresa:</b> ${cert.empresa}
            </div>`;
          encontrado = true;
        }
      });
      if (!encontrado) {
        resultado.innerHTML = "<div class='invalido'>‚ùå Certificado n√£o encontrado.</div>";
      }
    }

    window.onload = buscar;
  </script>
</body>
</html>
